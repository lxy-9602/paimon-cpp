<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paimon-cpp: paimon::PrefetchFileBatchReader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Paimon-cpp
   </div>
   <div id="projectbrief">A high-performance C++ implementation of Apache Paimon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepaimon.html">paimon</a></li><li class="navelem"><a class="el" href="classpaimon_1_1_prefetch_file_batch_reader.html">PrefetchFileBatchReader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classpaimon_1_1_prefetch_file_batch_reader-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">paimon::PrefetchFileBatchReader Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>The prefetch file batch reader extends the basic <a class="el" href="classpaimon_1_1_file_batch_reader.html" title="The batch reader for a single file supports returning the line number of the last batch read for dele...">FileBatchReader</a> interface for prefetch read, if a format implementation inherits from this class, it will automatically support the C++ Paimon prefetch capability and integrate with the Paimon prefetch framework.  
 <a href="classpaimon_1_1_prefetch_file_batch_reader.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="prefetch__file__batch__reader_8h_source.html">/home/runner/work/paimon-cpp/paimon-cpp/include/paimon/reader/prefetch_file_batch_reader.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for paimon::PrefetchFileBatchReader:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classpaimon_1_1_prefetch_file_batch_reader.png" usemap="#paimon::PrefetchFileBatchReader_map" alt=""/>
  <map id="paimon::PrefetchFileBatchReader_map" name="paimon::PrefetchFileBatchReader_map">
<area href="classpaimon_1_1_file_batch_reader.html" title="The batch reader for a single file supports returning the line number of the last batch read for dele..." alt="paimon::FileBatchReader" shape="rect" coords="0,56,200,80"/>
<area href="classpaimon_1_1_batch_reader.html" title="A batch reader that supports reading batch data into an arrow array." alt="paimon::BatchReader" shape="rect" coords="0,0,200,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a66a9334bd1dfe45e20040116ca4c53e2" id="r_a66a9334bd1dfe45e20040116ca4c53e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_prefetch_file_batch_reader.html#a66a9334bd1dfe45e20040116ca4c53e2">SeekToRow</a> (<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">row_number</a>)=0</td></tr>
<tr class="memdesc:a66a9334bd1dfe45e20040116ca4c53e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seeks to a specific row in the file.  <br /></td></tr>
<tr class="separator:a66a9334bd1dfe45e20040116ca4c53e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8167dd4af27a9a4ae20581cf2dccfadd" id="r_a8167dd4af27a9a4ae20581cf2dccfadd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_prefetch_file_batch_reader.html#a8167dd4af27a9a4ae20581cf2dccfadd">GetNextRowToRead</a> () <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> =0</td></tr>
<tr class="memdesc:a8167dd4af27a9a4ae20581cf2dccfadd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the row number of the next row to be read.  <br /></td></tr>
<tr class="separator:a8167dd4af27a9a4ae20581cf2dccfadd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69e71fd2021a1da2fe53c89a72e06596" id="r_a69e71fd2021a1da2fe53c89a72e06596"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_result.html">Result</a>&lt; std::vector&lt; std::pair&lt; <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>, <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_prefetch_file_batch_reader.html#a69e71fd2021a1da2fe53c89a72e06596">GenReadRanges</a> (<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">bool</a> *<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">need_prefetch</a>) <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> =0</td></tr>
<tr class="memdesc:a69e71fd2021a1da2fe53c89a72e06596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a list of row ranges to be read in batches.  <br /></td></tr>
<tr class="separator:a69e71fd2021a1da2fe53c89a72e06596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3352521fbeb92b417f685ee8230bca6" id="r_ac3352521fbeb92b417f685ee8230bca6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_prefetch_file_batch_reader.html#ac3352521fbeb92b417f685ee8230bca6">SetReadRanges</a> (<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> std::vector&lt; std::pair&lt; <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>, <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a> &gt; &gt; &amp;<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">read_ranges</a>)=0</td></tr>
<tr class="memdesc:ac3352521fbeb92b417f685ee8230bca6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the specific row ranges as a hint to be read from format file.  <br /></td></tr>
<tr class="separator:ac3352521fbeb92b417f685ee8230bca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classpaimon_1_1_file_batch_reader"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classpaimon_1_1_file_batch_reader')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classpaimon_1_1_file_batch_reader.html">paimon::FileBatchReader</a></td></tr>
<tr class="memitem:ac7266064352ed90581738242cf69500f inherit pub_methods_classpaimon_1_1_file_batch_reader" id="r_ac7266064352ed90581738242cf69500f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_result.html">Result</a>&lt; std::unique_ptr&lt;<a class="el" href="struct_arrow_schema.html">::ArrowSchema</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_file_batch_reader.html#ac7266064352ed90581738242cf69500f">GetFileSchema</a> () <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> =0</td></tr>
<tr class="separator:ac7266064352ed90581738242cf69500f inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b28c896a926c6496d03b9a5b55afb2 inherit pub_methods_classpaimon_1_1_file_batch_reader" id="r_af1b28c896a926c6496d03b9a5b55afb2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_file_batch_reader.html#af1b28c896a926c6496d03b9a5b55afb2">SetReadSchema</a> (<a class="el" href="struct_arrow_schema.html">::ArrowSchema</a> *<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">read_schema</a>, <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> std::shared_ptr&lt; <a class="el" href="classpaimon_1_1_predicate.html">Predicate</a> &gt; &amp;predicate, <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> std::optional&lt; <a class="el" href="classpaimon_1_1_roaring_bitmap32.html">RoaringBitmap32</a> &gt; &amp;<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">selection_bitmap</a>)=0</td></tr>
<tr class="memdesc:af1b28c896a926c6496d03b9a5b55afb2 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the read schema and predicate.  <br /></td></tr>
<tr class="separator:af1b28c896a926c6496d03b9a5b55afb2 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b474c67986fb8623cc7e40ca8f9109a inherit pub_methods_classpaimon_1_1_file_batch_reader" id="r_a9b474c67986fb8623cc7e40ca8f9109a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_file_batch_reader.html#a9b474c67986fb8623cc7e40ca8f9109a">GetPreviousBatchFirstRowNumber</a> () <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> =0</td></tr>
<tr class="memdesc:a9b474c67986fb8623cc7e40ca8f9109a inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the row number of the first row in the previously read batch.  <br /></td></tr>
<tr class="separator:a9b474c67986fb8623cc7e40ca8f9109a inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e5dea80b7b0238ed622f82681141245 inherit pub_methods_classpaimon_1_1_file_batch_reader" id="r_a7e5dea80b7b0238ed622f82681141245"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_file_batch_reader.html#a7e5dea80b7b0238ed622f82681141245">GetNumberOfRows</a> () <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> =0</td></tr>
<tr class="memdesc:a7e5dea80b7b0238ed622f82681141245 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of rows in the file.  <br /></td></tr>
<tr class="separator:a7e5dea80b7b0238ed622f82681141245 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5afd12bba8e497dfc95cba25a343ba3 inherit pub_methods_classpaimon_1_1_file_batch_reader" id="r_ac5afd12bba8e497dfc95cba25a343ba3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_file_batch_reader.html#ac5afd12bba8e497dfc95cba25a343ba3">SupportPreciseBitmapSelection</a> () <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> =0</td></tr>
<tr class="memdesc:ac5afd12bba8e497dfc95cba25a343ba3 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get whether or not support read precisely while bitmap pushed down.  <br /></td></tr>
<tr class="separator:ac5afd12bba8e497dfc95cba25a343ba3 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01358cb810bb14fcb26663d510c08fce inherit pub_methods_classpaimon_1_1_file_batch_reader" id="r_a01358cb810bb14fcb26663d510c08fce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_result.html">Result</a>&lt; <a class="el" href="classpaimon_1_1_batch_reader.html#a52a5b04ada9bf1da22f5d7e1784927b2">ReadBatch</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_file_batch_reader.html#a01358cb810bb14fcb26663d510c08fce">NextBatch</a> ()=0</td></tr>
<tr class="memdesc:a01358cb810bb14fcb26663d510c08fce inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the next batch of data.  <br /></td></tr>
<tr class="separator:a01358cb810bb14fcb26663d510c08fce inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4b5062701224aeae83472380d02f434 inherit pub_methods_classpaimon_1_1_file_batch_reader" id="r_ae4b5062701224aeae83472380d02f434"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_result.html">Result</a>&lt; <a class="el" href="classpaimon_1_1_batch_reader.html#a4ee7cac856f2b254e171b12db7146246">ReadBatchWithBitmap</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_file_batch_reader.html#ae4b5062701224aeae83472380d02f434">NextBatchWithBitmap</a> ()</td></tr>
<tr class="memdesc:ae4b5062701224aeae83472380d02f434 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the next batch of data.  <br /></td></tr>
<tr class="separator:ae4b5062701224aeae83472380d02f434 inherit pub_methods_classpaimon_1_1_file_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classpaimon_1_1_batch_reader"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classpaimon_1_1_batch_reader')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classpaimon_1_1_batch_reader.html">paimon::BatchReader</a></td></tr>
<tr class="memitem:a9741d92af7160375a51e1a497afcfa1a inherit pub_methods_classpaimon_1_1_batch_reader" id="r_a9741d92af7160375a51e1a497afcfa1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a9741d92af7160375a51e1a497afcfa1a">~BatchReader</a> ()=<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">default</a></td></tr>
<tr class="separator:a9741d92af7160375a51e1a497afcfa1a inherit pub_methods_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8af3a8346bbfc3de3da09840c70ac0ff inherit pub_methods_classpaimon_1_1_batch_reader" id="r_a8af3a8346bbfc3de3da09840c70ac0ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> std::shared_ptr&lt; <a class="el" href="classpaimon_1_1_metrics.html">Metrics</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a8af3a8346bbfc3de3da09840c70ac0ff">GetReaderMetrics</a> () <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> =0</td></tr>
<tr class="memdesc:a8af3a8346bbfc3de3da09840c70ac0ff inherit pub_methods_classpaimon_1_1_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the reader's metrics.  <br /></td></tr>
<tr class="separator:a8af3a8346bbfc3de3da09840c70ac0ff inherit pub_methods_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167febf97b0e2ef4f48f034fe3af16b6 inherit pub_methods_classpaimon_1_1_batch_reader" id="r_a167febf97b0e2ef4f48f034fe3af16b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a167febf97b0e2ef4f48f034fe3af16b6">Close</a> ()=0</td></tr>
<tr class="memdesc:a167febf97b0e2ef4f48f034fe3af16b6 inherit pub_methods_classpaimon_1_1_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the <code><a class="el" href="classpaimon_1_1_batch_reader.html" title="A batch reader that supports reading batch data into an arrow array.">BatchReader</a></code>, releasing any associated resources.  <br /></td></tr>
<tr class="separator:a167febf97b0e2ef4f48f034fe3af16b6 inherit pub_methods_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classpaimon_1_1_batch_reader"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classpaimon_1_1_batch_reader')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classpaimon_1_1_batch_reader.html">paimon::BatchReader</a></td></tr>
<tr class="memitem:a52a5b04ada9bf1da22f5d7e1784927b2 inherit pub_types_classpaimon_1_1_batch_reader" id="r_a52a5b04ada9bf1da22f5d7e1784927b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">using</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a52a5b04ada9bf1da22f5d7e1784927b2">ReadBatch</a> = std::pair&lt; std::unique_ptr&lt; <a class="el" href="struct_arrow_array.html">ArrowArray</a> &gt;, std::unique_ptr&lt; <a class="el" href="struct_arrow_schema.html">ArrowSchema</a> &gt; &gt;</td></tr>
<tr class="separator:a52a5b04ada9bf1da22f5d7e1784927b2 inherit pub_types_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee7cac856f2b254e171b12db7146246 inherit pub_types_classpaimon_1_1_batch_reader" id="r_a4ee7cac856f2b254e171b12db7146246"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">using</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a4ee7cac856f2b254e171b12db7146246">ReadBatchWithBitmap</a> = std::pair&lt; <a class="el" href="classpaimon_1_1_batch_reader.html#a52a5b04ada9bf1da22f5d7e1784927b2">ReadBatch</a>, <a class="el" href="classpaimon_1_1_roaring_bitmap32.html">RoaringBitmap32</a> &gt;</td></tr>
<tr class="separator:a4ee7cac856f2b254e171b12db7146246 inherit pub_types_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_classpaimon_1_1_batch_reader"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classpaimon_1_1_batch_reader')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classpaimon_1_1_batch_reader.html">paimon::BatchReader</a></td></tr>
<tr class="memitem:ac05becfb364d38b4a031f052bfc9cf14 inherit pub_static_methods_classpaimon_1_1_batch_reader" id="r_ac05becfb364d38b4a031f052bfc9cf14"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">static</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#ac05becfb364d38b4a031f052bfc9cf14">IsEofBatch</a> (<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> <a class="el" href="classpaimon_1_1_batch_reader.html#a52a5b04ada9bf1da22f5d7e1784927b2">ReadBatch</a> &amp;<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">batch</a>)</td></tr>
<tr class="memdesc:ac05becfb364d38b4a031f052bfc9cf14 inherit pub_static_methods_classpaimon_1_1_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether a <code><a class="el" href="classpaimon_1_1_batch_reader.html#a52a5b04ada9bf1da22f5d7e1784927b2">ReadBatch</a></code> or <code><a class="el" href="classpaimon_1_1_batch_reader.html#a4ee7cac856f2b254e171b12db7146246">ReadBatchWithBitmap</a></code> is eof batch, if return true, all the data has been returned.  <br /></td></tr>
<tr class="separator:ac05becfb364d38b4a031f052bfc9cf14 inherit pub_static_methods_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d21246481d9779eff506eaf8f1410fd inherit pub_static_methods_classpaimon_1_1_batch_reader" id="r_a4d21246481d9779eff506eaf8f1410fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">static</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a4d21246481d9779eff506eaf8f1410fd">IsEofBatch</a> (<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> <a class="el" href="classpaimon_1_1_batch_reader.html#a4ee7cac856f2b254e171b12db7146246">ReadBatchWithBitmap</a> &amp;<a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">batch_with_bitmap</a>)</td></tr>
<tr class="separator:a4d21246481d9779eff506eaf8f1410fd inherit pub_static_methods_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00dea15698a3203dd058daf2a184a74e inherit pub_static_methods_classpaimon_1_1_batch_reader" id="r_a00dea15698a3203dd058daf2a184a74e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">static</a> <a class="el" href="classpaimon_1_1_batch_reader.html#a52a5b04ada9bf1da22f5d7e1784927b2">ReadBatch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a00dea15698a3203dd058daf2a184a74e">MakeEofBatch</a> ()</td></tr>
<tr class="memdesc:a00dea15698a3203dd058daf2a184a74e inherit pub_static_methods_classpaimon_1_1_batch_reader"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make an eof batch or batch with bitmap.  <br /></td></tr>
<tr class="separator:a00dea15698a3203dd058daf2a184a74e inherit pub_static_methods_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81dd9677ebaf7b97ef898a51179e42c6 inherit pub_static_methods_classpaimon_1_1_batch_reader" id="r_a81dd9677ebaf7b97ef898a51179e42c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">static</a> <a class="el" href="classpaimon_1_1_batch_reader.html#a4ee7cac856f2b254e171b12db7146246">ReadBatchWithBitmap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpaimon_1_1_batch_reader.html#a81dd9677ebaf7b97ef898a51179e42c6">MakeEofBatchWithBitmap</a> ()</td></tr>
<tr class="separator:a81dd9677ebaf7b97ef898a51179e42c6 inherit pub_static_methods_classpaimon_1_1_batch_reader"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The prefetch file batch reader extends the basic <a class="el" href="classpaimon_1_1_file_batch_reader.html" title="The batch reader for a single file supports returning the line number of the last batch read for dele...">FileBatchReader</a> interface for prefetch read, if a format implementation inherits from this class, it will automatically support the C++ Paimon prefetch capability and integrate with the Paimon prefetch framework. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a66a9334bd1dfe45e20040116ca4c53e2" name="a66a9334bd1dfe45e20040116ca4c53e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66a9334bd1dfe45e20040116ca4c53e2">&#9670;&#160;</a></span>SeekToRow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_status.html">Status</a> paimon::PrefetchFileBatchReader::SeekToRow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>&#160;</td>
          <td class="paramname"><em>row_number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Seeks to a specific row in the file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">row_number</td><td>The row number to seek to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the operation. </dd></dl>

</div>
</div>
<a id="a8167dd4af27a9a4ae20581cf2dccfadd" name="a8167dd4af27a9a4ae20581cf2dccfadd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8167dd4af27a9a4ae20581cf2dccfadd">&#9670;&#160;</a></span>GetNextRowToRead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a> paimon::PrefetchFileBatchReader::GetNextRowToRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the row number of the next row to be read. </p>
<p>This method indicates the current read position within the file. </p><dl class="section return"><dt>Returns</dt><dd>The row number of the next row to read. </dd></dl>

</div>
</div>
<a id="a69e71fd2021a1da2fe53c89a72e06596" name="a69e71fd2021a1da2fe53c89a72e06596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69e71fd2021a1da2fe53c89a72e06596">&#9670;&#160;</a></span>GenReadRanges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_result.html">Result</a>&lt; std::vector&lt; std::pair&lt; <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>, <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a> &gt; &gt; &gt; paimon::PrefetchFileBatchReader::GenReadRanges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">bool</a> *&#160;</td>
          <td class="paramname"><em>need_prefetch</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a list of row ranges to be read in batches. </p>
<p>Each range specifies the start and end row numbers for a batch, allowing for efficient batch processing.</p>
<p>The underlying format layer (e.g., parquet) is responsible for determining the most effective way to split the data. This could be by row groups, stripes, or other internal data structures. The key principle is to split the data into contiguous, seekable ranges to minimize read amplification.</p>
<p>For example:</p><ul>
<li>A parquet format could split by RowGroup directly, ensuring each range aligns with a single RowGroup.</li>
</ul>
<p>The smallest splittable unit must be seekable to its start position, and the splitting strategy should aim to avoid read amplification.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">need_prefetch</td><td>A pointer to a boolean. The format layer sets this to indicate whether prefetching is beneficial for the current scenario, to avoid performance regression in certain cases. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of pairs, where each pair represents a range with a start and end row number. </dd></dl>

</div>
</div>
<a id="ac3352521fbeb92b417f685ee8230bca6" name="ac3352521fbeb92b417f685ee8230bca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3352521fbeb92b417f685ee8230bca6">&#9670;&#160;</a></span>SetReadRanges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">virtual</a> <a class="el" href="classpaimon_1_1_status.html">Status</a> paimon::PrefetchFileBatchReader::SetReadRanges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">const</a> std::vector&lt; std::pair&lt; <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a>, <a class="el" href="memory__pool_8h.html#a147ba4ba34a215b3a4f3a95c1ee11704">uint64_t</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>read_ranges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the specific row ranges as a hint to be read from format file. </p>
<p>If the specific file format does not support explicit range-based reads, implementations may gracefully ignore this hint and provide an empty (no-op) implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">read_ranges</td><td>A vector of pairs, where each pair defines a half-open interval <code>[start_row, end_row)</code>. The <code>start_row</code> is inclusive, and the <code>end_row</code> is exclusive. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/paimon-cpp/paimon-cpp/include/paimon/reader/<a class="el" href="prefetch__file__batch__reader_8h_source.html">prefetch_file_batch_reader.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
